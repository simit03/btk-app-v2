{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block head_extra_styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile-mobile.css') }}">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
{% endblock %}

{% block content %}
<div class="profile-page">
    <div class="profile-container">
        <div class="profile-header">
            <h1 class="profile-title">👤 Profilim</h1>
            <p class="profile-subtitle">Kişisel bilgilerin ve istatistiklerin</p>
        </div>
        
        <div class="profile-content">
            <!-- Kullanıcı Bilgileri Kartı -->
            <div class="profile-card">
                <div class="profile-avatar">
                    <span class="avatar-emoji">👤</span>
                </div>
                
                <div class="profile-info">
                    <h2 class="user-name">{{ session.get('first_name', '') }} {{ session.get('last_name', '') }}</h2>
                    <p class="user-username">@{{ session.get('username', '') }}</p>
                    <p class="user-grade">{{ session.get('grade', '') }}. Sınıf Öğrencisi</p>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-icon">✅</span>
                        <span class="stat-value" id="profileCorrectQuestions">0</span>
                        <span class="stat-label">Çözülen Soru</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">🏆</span>
                        <span class="stat-value" id="profileTotalAchievements">0</span>
                        <span class="stat-label">Kupalarım</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">⭐</span>
                        <span class="stat-value" id="profileTotalPoints">0</span>
                        <span class="stat-label">Toplam Puan</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">🎯</span>
                        <span class="stat-value" id="profileCompletedQuizzes">0</span>
                        <span class="stat-label">Quiz Tamamlandı</span>
                    </div>
                </div>
            </div>
            
            <!-- Profil Düzenleme Bölümü -->
            <div class="profile-edit-section">
                <h3>📝 Profil Bilgilerini Düzenle</h3>
                <div class="edit-form">
                    <div class="form-group">
                        <label>Adı</label>
                        <input type="text" value="{{ session.get('first_name', '') }}" class="edit-input">
                    </div>
                    <div class="form-group">
                        <label>Soyadı</label>
                        <input type="text" value="{{ session.get('last_name', '') }}" class="edit-input">
                    </div>
                    <div class="form-group">
                        <label>Sınıf</label>
                        <select class="edit-input">
                            <option value="1" {% if session.get('grade') == 1 %}selected{% endif %}>1. Sınıf</option>
                            <option value="2" {% if session.get('grade') == 2 %}selected{% endif %}>2. Sınıf</option>
                            <option value="3" {% if session.get('grade') == 3 %}selected{% endif %}>3. Sınıf</option>
                            <option value="4" {% if session.get('grade') == 4 %}selected{% endif %}>4. Sınıf</option>
                        </select>
                    </div>
                    <button class="save-btn">💾 Değişiklikleri Kaydet</button>
                </div>
            </div>
            
            <!-- Quiz Raporu Bölümü -->
            <div class="quiz-report-section">
                <h3>📊 Quiz Raporu</h3>
                <div class="report-cards">
                    <div class="report-card correct">
                        <div class="report-icon">✅</div>
                        <div class="report-info">
                            <h4>Doğru Çözülen</h4>
                            <span class="report-value" id="profileCorrectReport">0</span>
                            <span class="report-label">soru</span>
                        </div>
                    </div>
                    <div class="report-card incorrect">
                        <div class="report-icon">❌</div>
                        <div class="report-info">
                            <h4>Yanlış Çözülen</h4>
                            <span class="report-value" id="profileIncorrectReport">0</span>
                            <span class="report-label">soru</span>
                        </div>
                    </div>
                    <div class="report-card total">
                        <div class="report-icon">📈</div>
                        <div class="report-info">
                            <h4>Toplam Başarı</h4>
                            <span class="report-value" id="profileSuccessPercentage">0%</span>
                            <span class="report-label">oran</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Başarılar Bölümü -->
            <div class="achievements-section">
                <h3>🏆 Başarılarım</h3>
                <div class="achievements-container" id="achievementsContainer">
                    <div class="achievements-loading">
                        <div class="loading-spinner"></div>
                        <p>Başarılar yükleniyor...</p>
                    </div>
                </div>
            </div>
            

            
            <!-- Hızlı Erişim -->
            <div class="profile-actions">
                <h3>🚀 Hızlı Erişim</h3>
                <div class="action-buttons">
                    <a href="/quiz" class="action-btn primary">
                        <span class="action-icon">🎯</span>
                        <span>Quiz'e Başla</span>
                    </a>
                    <a href="/progress" class="action-btn secondary">
                        <span class="action-icon">📊</span>
                        <span>İlerleme Raporu</span>
                    </a>
                    <a href="/" class="action-btn secondary">
                        <span class="action-icon">🏠</span>
                        <span>Ana Sayfa</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block body_extra_scripts %}
    <script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %} 